/*!
 * PSPDFKit for Web 2019.5.4 (https://pspdfkit.com/web)
 * 
 * Copyright (c) 2016-2019 PSPDFKit GmbH. All rights reserved.
 * 
 * THIS SOURCE CODE AND ANY ACCOMPANYING DOCUMENTATION ARE PROTECTED BY INTERNATIONAL COPYRIGHT LAW
 * AND MAY NOT BE RESOLD OR REDISTRIBUTED. USAGE IS BOUND TO THE PSPDFKIT LICENSE AGREEMENT.
 * UNAUTHORIZED REPRODUCTION OR DISTRIBUTION IS SUBJECT TO CIVIL AND CRIMINAL PENALTIES.
 * This notice may not be removed from this file.
 * 
 * PSPDFKit uses several open source third-party components: https://pspdfkit.com/acknowledgements/web/
 */
(window.__PSPDFKitChunk=window.__PSPDFKitChunk||[]).push([[37],{908:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),o=a(33),i=a.n(o),l=a(14),c=a.n(l),s=a(34),d=a.n(s),u=a(16),p=a.n(u),g=a(22),m=a.n(g),f=a(29),b=a.n(f),v=a(454),h=a(15),y=a(3),P=a(183),w=a(36),I=a(25),x=a(80),k=a(5),N=a(2),E=a(35),S=a(0),O=a(13),D=a.n(O),C=a(17),M=a(455),j=a(48),A=a(103),z=a(165),B=new N.M({width:h.b,height:h.a}),R=S.createElement(A.a,null),T=function(e){var t=e.styles,r=e.formatMessage;return S.createElement("div",{style:{width:e.width,height:e.height},className:t.importedDocument},S.createElement("div",{className:t.importedDocumentIconCircle},S.createElement(j.a,{src:a(479)})),S.createElement("span",{className:t.importedDocumentInfo},r(F.documentMergedHere)))},L=function(e,t,a,r){var n=e.map(function(e){return{type:"page",page:e,rotation:0,label:e.pageLabel}}),o=function(e){var t=e.dupeOf||e.label,a=0,r=!0,o=!1,i=void 0;try{for(var l,c=n[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var s=l.value;null!=s.dupeOf&&s.dupeOf===t&&null!=s.dupeNumber&&s.dupeNumber>a&&(a=s.dupeNumber)}}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return a+1},i=!0,l=!1,c=void 0;try{for(var s,d=t[Symbol.iterator]();!(i=(s=d.next()).done);i=!0){var u=s.value;switch(u.type){case"addPage":var g=void 0;null!=u.afterPageIndex?g=u.afterPageIndex+1:(Object(y.h)(null!=u.beforePageIndex),g=u.beforePageIndex),n=n.insert(g,{type:"newPage",label:a(F.newPage),rotation:0,size:new N.M({width:u.pageWidth,height:u.pageHeight})});break;case"removePages":var m=u.pageIndexes.map(function(e){return n.get(e)}),f=!0,b=!1,v=void 0;try{for(var h,P=m[Symbol.iterator]();!(f=(h=P.next()).done);f=!0){var w=h.value;Object(y.h)(null!=w);var I=n.indexOf(w);n=n.delete(I)}}catch(e){b=!0,v=e}finally{try{f||null==P.return||P.return()}finally{if(b)throw v}}break;case"rotatePages":var x=!0,k=!1,E=void 0;try{for(var S,O=u.pageIndexes[Symbol.iterator]();!(x=(S=O.next()).done);x=!0){var D=S.value,C=n.get(D);Object(y.h)(null!=C);var M=void 0,j=void 0;Object(y.h)("page"===C.type||"newPage"===C.type);var A=C.rotation;if(j=90===u.rotateBy?270===A?0:A+u.rotateBy:90===A?0:180===A?90:270===A?180:A+u.rotateBy,Object(y.h)(0===j||90===j||180===j||270===j),"page"===C.type)M=p()({},C,{rotation:j});else{if("newPage"!=C.type)throw new y.a("Rotation is not allowed on imported documents");M=p()({},C,{rotation:j})}n=n.set(D,M)}}catch(e){k=!0,E=e}finally{try{x||null==O.return||O.return()}finally{if(k)throw E}}break;case"duplicatePages":var z=u.pageIndexes.map(function(e){return n.get(e)}),B=!0,R=!1,T=void 0;try{for(var L,H=z[Symbol.iterator]();!(B=(L=H.next()).done);B=!0){var _=L.value;Object(y.h)(null!=_),Object(y.h)("page"===_.type);var V=o(_),W=_.dupeOf||_.label,K=n.indexOf(_);n=n.insert(K+1,Object.assign({},_,{label:"".concat(W," (").concat(V,")"),dupeOf:W,dupeNumber:V}))}}catch(e){R=!0,T=e}finally{try{B||null==H.return||H.return()}finally{if(R)throw T}}break;case"movePages":var G=u.pageIndexes[0],Y=void 0;null!=u.beforePageIndex?Y=u.beforePageIndex:(Object(y.h)(null!=u.afterPageIndex),Y=u.afterPageIndex+1);var q=n.get(G);n=n.delete(G),Object(y.h)(null!=q),n=n.insert(Y,q);break;case"importDocument":var U=void 0;null!=u.beforePageIndex?U=u.beforePageIndex:(Object(y.h)(null!=u.afterPageIndex),U=u.afterPageIndex+1);var J=void 0;if("string"==typeof u.document){var Q=u.document;Object(y.h)(r.has(Q)),J=r.get(Q,"Imported Document")}else Object(y.h)("string"==typeof u.document.name),J=u.document.name;n=n.insert(U,{type:"importedDocument",label:J});break;case"keepPages":throw Error("Unknown document operation");default:Object(y.b)(u.type)}}}catch(e){l=!0,c=e}finally{try{i||null==d.return||d.return()}finally{if(l)throw c}}return n};t.default=Object(I.e)(function(e){var t,r,o=e.onCancel,l=e.pages,s=e.dispatch,u=e.backend,g=e.frameWindow,f=e.intl.formatMessage,I=e.CSS_HACK.styles,O=S.useState(Object(k.b)()),A=b()(O,2),H=A[0],_=(A[1],S.useState(Object(k.a)())),V=b()(_,2),W=V[0],K=V[1],G=S.useState(0),Y=b()(G,2),q=Y[0],U=Y[1],J=W.slice(0,W.size-q),Q=L(e.pages,J,f,H),X=S.useState(Object(k.g)()),Z=b()(X,2),$=Z[0],ee=Z[1],te=S.useState(!1),ae=b()(te,2),re=ae[0],ne=ae[1],oe=S.useState(!1),ie=b()(oe,2),le=ie[0],ce=ie[1],se=S.useCallback(function(e){K(J.push(e)),U(0)},[J]),de=S.useRef(!0);S.useLayoutEffect(function(){return function(){de.current&&(de.current=!1)}},[]);var ue=S.useCallback(function(){var e=l.get(0),t=e?e.pageSize:B,a={type:"addPage",backgroundColor:N.j.WHITE,pageWidth:t.width,pageHeight:t.height,rotateBy:0};1===$.size?a.afterPageIndex=$.first():a.beforePageIndex=0,se(a),ee($.clear())},[l,$,se]),pe=S.useCallback(function(){se({type:"removePages",pageIndexes:$.toArray()}),ee($.clear())},[se,$]),ge=S.useCallback(function(){se({type:"duplicatePages",pageIndexes:$.toArray()}),ee($.clear())},[se,$]),me=S.useCallback(function(){se({type:"rotatePages",pageIndexes:$.toArray(),rotateBy:270})},[se,$]),fe=S.useCallback(function(){se({type:"rotatePages",pageIndexes:$.toArray(),rotateBy:90})},[se,$]),be=S.useCallback(function(){var e=J,t=!0,a=!1,r=void 0;try{for(var n,o=$.sort()[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var i=n.value;e=e.push({type:"movePages",pageIndexes:[i],beforePageIndex:i-1})}}catch(e){a=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(a)throw r}}K(e),U(0),ee(Object(k.g)($.toArray().map(function(e){return e-1})))},[$,J]),ve=S.useCallback(function(){var e=J,t=!0,a=!1,r=void 0;try{for(var n,o=$.sort().reverse()[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var i=n.value;e=e.push({type:"movePages",pageIndexes:[i],afterPageIndex:i})}}catch(e){a=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(a)throw r}}K(e),U(0),ee(Object(k.g)($.toArray().map(function(e){return e+1})))},[$,J]),he=S.useCallback(function(){ee($.clear()),U(q+1)},[$,q]),ye=S.useCallback(function(){ee($.clear()),U(q-1)},[$,q]),Pe=S.useCallback(m()(c.a.mark(function e(){var t,a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t={},1===$.size?t.afterPageIndex=$.first():t.beforePageIndex=0,(a=document.createElement("input")).type="file",a.accept="application/pdf",a.onchange=function(e){if(0!==e.target.files.length){var a=J,r=!0,n=!1,o=void 0;try{for(var i,l=function(){var e=i.value;return"string"!=typeof e.name||0===e.name.length?{v:void 0}:"application/pdf"!==e.type?(Object(y.l)("The uploaded file must be a PDF."),{v:void 0}):-1!==Q.findIndex(function(t){return"importedDocument"===t.type&&t.label===e.name})?{v:void 0}:void(a=a.push(p()({type:"importDocument",treatImportedDocumentAsOnePage:!0,document:e},t)))},c=e.target.files[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var s=l();if("object"===d()(s))return s.v}}catch(e){n=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(n)throw o}}K(a),U(0),ee($.clear())}},a.click();case 7:case"end":return e.stop()}},e)})),[$,H,se,J,Q]),we=S.useCallback(function(){ee(Q.keySeq().toSet())},[Q,ee]),Ie=S.useCallback(function(){ee($.clear())},[$,ee]),xe=S.useCallback(function(e){$.has(e)?ee($.delete(e)):ee($.add(e))},[$,ee]),ke=S.useCallback(function(){o()},[o]),Ne=S.useCallback(function(){ne(!0),s(Object(P.a)(J.toArray(),function(){de.current&&ne(!1)},function(e){throw de.current&&ne(!1),e}))},[s,J]),Ee=S.useCallback(m()(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return ne(!0),e.prev=1,e.next=4,u.exportPDFWithOperations(J.toArray().map(E.k));case 4:t=e.sent,Object(x.c)(t,g),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(1),e.t0;case 11:return e.prev=11,de.current&&ne(!1),e.finish(11);case 14:case"end":return e.stop()}},e,null,[[1,8,11,14]])})),[u,J,g]),Se=$.size>0&&void 0===$.find(function(e){var t=Q.get(e);return Object(y.h)(null!=t),"page"!==t.type&&"newPage"!==t.type}),Oe=$.size>0&&void 0===$.find(function(e){var t=Q.get(e);return Object(y.h)(null!=t),"page"!==t.type}),De=!$.isEmpty()&&!$.includes(0),Ce=!$.isEmpty()&&!$.includes(Q.size-1),Me=q<W.size,je=q>0,Ae=I.toolbar.toolbarButton,ze=S.useMemo(function(){return[{type:"editor/add",onPress:ue,className:Ae,disabled:re,children:f(F.newPage)},{type:"editor/remove",onPress:pe,className:Ae,disabled:0===$.size||$.size===Q.size||re,children:f(F.removePage)},{type:"editor/duplicate",onPress:ge,className:Ae,children:f(F.duplicatePage),disabled:!Oe||re},{type:"editor/rotateLeft",onPress:me,className:Ae,children:f(F.rotatePageLeft),disabled:!Se||re},{type:"editor/rotateRight",onPress:fe,className:Ae,children:f(F.rotatePageRight),disabled:!Se||re},{type:"editor/moveLeft",onPress:be,className:I.toolbar.toolbarButton,children:f(F.moveBefore),disabled:!De||re},{type:"editor/moveRight",onPress:ve,className:I.toolbar.toolbarButton,children:f(F.moveAfter),disabled:!Ce||re},{type:"editor/importDocument",onPress:Pe,className:Ae,children:f(F.mergeDocument),disabled:re},{type:"spacer"},{type:"editor/undo",onPress:he,className:I.toolbar.toolbarButton,children:f(C.a.undo),disabled:!Me||re},{type:"editor/redo",onPress:ye,className:I.toolbar.toolbarButton,children:f(C.a.redo),disabled:!je||re},{type:"editor/selectAll",onPress:we,className:Ae,children:f(F.selectAll),disabled:$.size===Q.size||re},{type:"editor/selectNone",onPress:Ie,className:Ae,children:f(F.selectNone),disabled:$.isEmpty()||re}]},[ue,Ae,re,f,pe,$,Q.size,ge,Oe,me,Se,fe,be,I.toolbar.toolbarButton,De,ve,Ce,Pe,he,Me,ye,je,we,Ie]),Be=S.useState(Number.POSITIVE_INFINITY),Re=b()(Be,2),Te=Re[0],Le=Re[1],Fe=S.useMemo(function(){return Te===Number.POSITIVE_INFINITY?[ze,[]]:[ze.slice(0,Te),ze.slice(Te).filter(function(e){return"spacer"!==e.type}).map(function(e){return{item:p()({},e,{dropdownGroup:"documentEditor"})}})]},[ze,Te]),He=b()(Fe,2),_e=He[0],Ve=He[1],We=S.useState(new N.M),Ke=b()(We,2),Ge=Ke[0],Ye=Ke[1],qe=S.useCallback(function(e){Le(Number.POSITIVE_INFINITY),Ye(new N.M({width:e.width,height:e.height}))},[Ye,Le]),Ue=S.useRef(null);S.useLayoutEffect(function(){var e=Ue.current;if(e&&0!==Ge.width){var t=e.children;if(t.length!==Te){var a=e.ownerDocument.defaultView.getComputedStyle(e),r=44+(parseInt(a.getPropertyValue("padding-left"))||0)+(parseInt(a.getPropertyValue("padding-right"))||0),n=[].findIndex.call(t,function(e,t){return"spacer"!==ze[t].type&&(r+=e.clientWidth)>Ge.width});Le(-1===n?Number.POSITIVE_INFINITY:n),e.ownerDocument.defaultView.innerWidth>=h.e?ce(!0):ce(!1)}}},[Ge,Te,Le,ze]);var Je=e.CSS_HACK.components,Qe=Je.ToolbarButtonComponent,Xe=Je.ToolbarDropdownGroupComponent;return S.createElement("div",{className:D()(I.docEditor,"PSPDFKit-DocumentEditor")},S.createElement("div",{className:I.toolbar.root,style:{flex:0}},S.createElement("div",{ref:Ue,className:I.toolbarContainer},_e.map(function(e,t){return"spacer"===e.type?S.createElement("div",{style:{flex:1},key:"spacer-".concat(t)}):S.createElement(Qe,i()({},e,{key:e.type}))})),Ve.length>0&&S.createElement(S.Fragment,null,S.createElement("div",{style:{flex:1},key:"spacer-responsive"}),S.createElement(Xe,{icon:{type:"more",size:{width:20,height:20}},items:Ve,discreteDropdown:!0,caretDirection:"down",ItemComponent:function(e){var t=e.item;return e.isSelectedItem?null:S.createElement(Qe,i()({},t.item,{key:t.type,className:D()(t.item.className,I.toolbar.dropdownButton)}))}}))),S.createElement("div",{className:I.pagesView},S.createElement(z.a,{onResize:qe}),S.createElement("div",{className:D()((t={},n()(t,I.pagesGrid,!0),n()(t,I.pagesGridLargeThumbnails,le),t))},S.createElement(M.a,{totalItems:Q.size,width:Ge.width,height:Ge.height,itemScale:e.scale,renderItemCallback:function(e,t,a){var r,n=Q.get(e);switch(Object(y.h)(null!=n),n.type){case"page":r=S.createElement(v.b,{key:"page-".concat(n.label),page:n.page,size:t,maxSize:a,rotation:n.rotation});break;case"newPage":var o=Object(v.a)(n.size,n.rotation,t,a),i=o.rotatedWidth,l=o.rotatedHeight;r=S.createElement("div",{key:"newPage-".concat(n.label),style:{width:i,height:l}});break;case"importedDocument":var c=Object(v.a)(B,0,t,a),s=c.containerWidth,d=c.containerHeight;r=S.createElement(T,{width:s,height:d,key:"importedDoc-".concat(n.label),styles:I,formatMessage:f});break;default:Object(y.b)(n.type)}return{item:r,label:n.label}},onItemPress:xe,selectedItemIndexes:$,cssPrefix:"PSPDFKit-DocumentEditor"}))),S.createElement("div",{className:I.bottomBar},S.createElement(w.b,{onClick:ke},f(C.a.cancel)),S.createElement("div",{className:D()((r={},n()(r,I.pagesSelectedIndicator,!0),n()(r,I.pagesSelectedIndicatorShown,$.size>0),r))},S.createElement("div",{className:I.pagesSelectedIcon},S.createElement(j.a,{src:a(480)})),f(F.pagesSelected,{arg0:$.size})),S.createElement("div",{className:I.spacer}),re&&R,S.createElement(w.b,{disabled:re,onClick:Ee},f(F.saveAs)),S.createElement(w.b,{primary:!0,disabled:J.isEmpty()||re,onClick:Ne},f(C.a.save))))});var F=Object(I.d)({newPage:{id:"newPage",defaultMessage:"New Page",description:"Add new page"},removePage:{id:"removePage",defaultMessage:"Remove Page",description:"Remove page"},duplicatePage:{id:"duplicatePage",defaultMessage:"Duplicate Page",description:"Duplicate page"},rotatePageLeft:{id:"rotatePageLeft",defaultMessage:"Rotate Page Left",description:"Rotate Page Left"},rotatePageRight:{id:"rotatePageRight",defaultMessage:"Rotate Page Right",description:"Rotate Page Right"},mergeDocument:{id:"mergeDocument",defaultMessage:"Merge Document",description:"Merge Document"},selectAll:{id:"selectAll",defaultMessage:"Select All",description:"Select All Pages"},selectNone:{id:"selectNone",defaultMessage:"Select None",description:"Deselect All Pages"},saveAs:{id:"saveAs",defaultMessage:"Export Modified Document",description:"Save Modified Document Locally"},moveBefore:{id:"moveBefore",defaultMessage:"Move Before",description:"Move page before previous one"},moveAfter:{id:"moveAfter",defaultMessage:"Move After",description:"Move page after next one"},documentMergedHere:{id:"documentMergedHere",defaultMessage:"Document will be merged here",description:"Placeholder for the imported document"},save:{id:"save",defaultMessage:"Apply Modifications",description:"Apply Modifications to the current Document"},pagesSelected:{id:"pagesSelected",defaultMessage:"{arg0, plural,\n      =0 {{arg0} Pages}\n      one {{arg0} Page}\n      two {{arg0} Pages}\n      other {{arg0} Pages}\n    }",description:"Number of pages selected."}})}}]);